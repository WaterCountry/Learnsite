<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Python集成开发和学习环境IDLE</title>
</head>

 <link href="../code/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
<script src="../code/jquery.min.js" type="text/javascript"></script>
<script src="../code/html2canvas.min.js" type="text/javascript"></script>
<script src="../code/skulpt.min.js" type="text/javascript"></script>
<script src="../code/skulpt-stdlib.js" type="text/javascript"></script>
<script src="../code/build/src/ace.js" type="text/javascript"></script>
<script src="../code/build/src/ext-language_tools.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="../code/console.css"/>

<body>
<div class="container ">
    <div id="editor" class="ace-gruvbox ace_editor" > </div>
</div>
<div id="cv" class="cvdiv"></div>

<div class="tooltip">
	<span class="keymodel" title="界面切换">❖</span>
	<span class="keyword" title="前进">forward</span>
	<span class="keyword" title="后退">backward</span>
	<span class="keyword" title="左转">left</span>
	<span class="keyword" title="右转">right</span>
	<span class="keyword" title="画圆">circle</span>
	<span class="keyword" title="画笔颜色">pencolor</span>
	<span class="keyword" title="抬笔">penup</span>
	<span class="keyword" title="落笔">pendown</span>
	<span class="keyword" title="画笔粗细">pensize</span>
	<span class="keyword" title="画笔方向">setheading</span>
	<span class="keyword" title="回家">home</span>	
	<span class="keyword" title="填充颜色">fillcolor</span>
	<span class="keyword" title="开始填充">begin_fill</span>
	<span class="keyword" title="结束填充">end_fill</span>
	<span class="keyword" title="图章">stamp</span>
	<span class="keyopen" title="帮助">❤</span>
</div>

<div id="content" >
</div>
<div  id="run" onclick="run()" title="运行代码"> </div>
<div  id="big" onclick="fontbig()" title="放大代码"> </div>
<div  id="small" onclick="fontsmall()" title="缩小代码"> </div>
<form id="form1" runat="server"> 

<span id="btnerase"  onclick="clearcv();" >
<i class="fa fa-eraser" aria-hidden="true"></i> 整理</span> 
</form>

<div id="savemsg"> </div>

<script src="../code/console.js"  type="text/javascript"></script>

<script type="text/javascript">
 
	var codes=new Array();
	var arrange=false;
    var keyopen=false;
    var sessionkey="sessionconsoleauto";
   
    var fontsize=24;
    var ide;
    var editor = document.getElementById("editor");
    ide = new ipythonExample(editor);		
	
	function run(){
		ide.execute();
	}

	function clearcv(){
		if(codes.length>0){
			$("#cv").empty(); 
			$("#editor").empty(); 
			 
			ide = new ipythonExample(editor);	 
			ide.inCell.setValue(ArrayToString(codes));	 
			arrange=true;
		}
		else{
			ide.getsession();
		}
    }

	function fontbig(){
		fontsize+=2;
		if (fontsize>32){
			fontsize=32;
		}
		$(".ace_editor").css({"font-size":fontsize});
	}

	function fontsmall(){
		fontsize-=2;
		if (fontsize<24){
			fontsize=24;
		}
		$(".ace_editor").css({"font-size":fontsize});
	}
        	    	
	$(document).ready(function(){
		$(".keyopen").click(function(){
			keyopen=!keyopen;
			if(keyopen) {
				$(this).css("color","#88c166");
				$(".keyword").css("color","#88c166");
			}
			else{
				$(this).css("color","#56676b");
				$(".keyword").css("color","#56676b");
			}
		});	
			
		$(".keyword").click(function(){
			if(keyopen){
				var keytxt=$(this).text();	
				var cmdstr="";
				switch(keytxt)
				{
					case "forward":
						cmdstr="forward(50)";
						break;
					case "backward":
						cmdstr="backward(50)";
						break;
					case "left":
						cmdstr="left(90)";
						break;
					case "right":
						cmdstr="right(90)";
						break;
					case "circle":
						cmdstr="circle(50)";
						break;
					case "pencolor":
						cmdstr="pencolor('red')";
						break;
					case "penup":
						cmdstr="penup()";
						break;
					case "pendown":
						cmdstr="pendown()";
						break;
					case "pensize":
						cmdstr="pensize(5)";
						break;
					case "setheading":
						cmdstr="setheading(30)";
						break;
					case "home":
						cmdstr="home()";
						break;
					case "fillcolor":
						cmdstr="fillcolor('red')";
						break;
					case "begin_fill":
						cmdstr="begin_fill()";
						break;
					case "end_fill":
						cmdstr="end_fill()";
						break;
					case "stamp":
						cmdstr="stamp()";
						break;				
					default:
						break;			
				}
				var oldstr =ide.inCell.getValue();
				if(oldstr!=""){
					oldstr=oldstr+"\n";
				}
				var newstr=oldstr+cmdstr;
				ide.inCell.setValue(newstr);
				ide.inCell.focus();
			}
		});
	});


function ArrayToString(c){
	var s="";
	var len=c.length;
	for (i=0;i<len;i++){
		s=s+c[i];
		if(i<len-1) s=s+"\n";
	}
	return s;
}	
</script>
</body>
</html>